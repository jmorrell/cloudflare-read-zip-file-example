# Zip File Reader for Cloudflare Workers

This project demonstrates how to read and extract Zip files on Cloudflare Workers using the Web Streams API and built-in decompression capabilities.

## Generated with AI

All code in this project (and this README) was generated by [Claude](https://claude.ai) but prompted and overseen by [Jeremy Morrell](https://github.com/jmorrell).

## Overview

This example Worker accepts Zip files via HTTP POST requests and extracts their contents server-side. It showcases:

- **Native Zip parsing** - Custom implementation that reads the Zip format specification
- **Streaming extraction** - Uses `ReadableStream` and `DecompressionStream` for efficient file extraction
- **Deflate support** - Handles both stored (uncompressed) and deflate-compressed files
- **Cloudflare Workers compatibility** - Built specifically for the Workers runtime environment

## Code Structure

- [`src/index.ts`](src/index.ts) - Main Worker handler that processes uploads
- [`src/zip.ts`](src/zip.ts) - `ZipReader` class implementing Zip format parsing

## Features

The `ZipReader` class provides:

- Parsing of Zip central directory and file headers
- File metadata extraction (filename, size, compression method, last modified date, CRC32)
- Streaming file extraction with automatic decompression
- Support for both stored (method 0) and deflate (method 8) compression

## Usage

### Deploy to Cloudflare Workers

```bash
npm install
npm run deploy
```

### Local Development

```bash
npm run dev
```

### Send a Zip File

```bash
curl -X POST -F "file=@archive.zip" https://your-worker.workers.dev
```

The Worker will extract and log the contents of each file in the Zip archive.

## How It Works

1. **Upload**: The Worker receives a Zip file via multipart form data POST request
2. **Parse**: The `ZipReader` class parses the Zip file structure:
   - Locates the End of Central Directory (EOCD) record
   - Reads the central directory to find all file entries
   - Extracts metadata for each file
3. **Extract**: Individual files can be extracted as `ReadableStream` instances
4. **Decompress**: Deflate-compressed files are automatically decompressed using the Web Streams `DecompressionStream` API

## License

This is an example project for educational purposes.
